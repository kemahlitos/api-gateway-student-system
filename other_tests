ÅŸimdi doÄŸru mu anlÄ±yorum: Ã¶nceden sistemimiz ÅŸÃ¶yleydi, biz admin ve password deÄŸiÅŸkeni tanÄ±mlÄ±yorduk bunlar authenticationa gidip geÃ§erliyse bi token Ã¼retiyorlardÄ± bu tokenÄ± da data-service'e geÃ§ince eÄŸer superkey ile uyuÅŸuyorsa token ve gerekli teslerden geÃ§erse tamam al bu senin verin diyordu. Ama ÅŸimdi bu iÅŸler kong'da olucak.Ã–nce jwt plugini aktif ettik ne iÅŸe yarÄ±yor anlamadÄ±m? Sonra Bunun iÃ§in bi consumer grubu grubu oluÅŸturduk sadece username'i var(passworda gerek kalmadÄ± mÄ±?), OluÅŸturduÄŸumuz consumerlardan admin kullanÄ±cÄ±sÄ± iÃ§in jwt Ã§aÄŸÄ±rÄ±nca bize key ve secret veriyor(Ã¶nceki sistemden farklÄ±), sonra bi zde bu key ve secreti auth-service entegre ediyoruz?


ChatGPT:
Evet! ğŸ‘ Ã‡ok ama Ã§ok gÃ¼zel Ã¶zetledin. Ufak birkaÃ§ detayÄ± netleÅŸtirip her ÅŸeyi tam oturtalÄ±m.

âœ… DOÄRU ANLADIÄIN KISIMLAR:
ğŸ§± Ã–nceki sistem (Kong yokken):
auth-service kendi iÃ§inde username + password kontrol ederdi

DoÄŸruysa SECRET_KEY = "supersecretkey" ile JWT Ã¼retirdi

data-service de bu tokenâ€™Ä± aynÄ± SECRET_KEY ile doÄŸrulardÄ±

ğŸ” Yeni sistemde (Kong geldiÄŸinde):
ArtÄ±k Kong her ÅŸeyin ortasÄ±nda, o karar veriyor:

Token doÄŸru mu?

Kimlik kontrolÃ¼ tamam mÄ±?

Servise eriÅŸim verilsin mi?

ğŸ” Åimdi tek tek bakalÄ±m:
âœ… 1. JWT Plugin ne iÅŸe yarÄ±yor?
Kong'a ÅŸunu sÃ¶ylÃ¼yor:

â€œBu servise gelen isteklerde JWT kontrolÃ¼ yap. Token varsa ve doÄŸruysa geÃ§, yoksa reddet.â€

Yani bu plugin â†’ Authorization: Bearer <token> baÅŸlÄ±ÄŸÄ±nÄ± Kongâ€™un kontrol etmesini saÄŸlar.
Kendi iÃ§inde:

Token var mÄ±?

Token sÃ¼resi geÃ§memiÅŸ mi?

Hangi kullanÄ±cÄ±ya ait?

O kullanÄ±cÄ± Kongâ€™da kayÄ±tlÄ± mÄ±?

...bunlara bakar.

âœ… 2. Consumer ne demek?
Kong iÃ§inde APIâ€™yi kullanan â€œkullanÄ±cÄ±â€ tanÄ±mÄ±dÄ±r

username=admin gibi bir kayÄ±t gireriz

Parola gerekmez Ã§Ã¼nkÃ¼ bu kullanÄ±cÄ± JWT token ile doÄŸrulanÄ±r

Yani: token = kimlik

âœ… 3. JWT oluÅŸtururken key ve secret nereden geliyor?
Consumer oluÅŸturduktan sonra ÅŸunu dedik:

bash
Kopyala
DÃ¼zenle
POST /consumers/admin/jwt
Bu, Kongâ€™a ÅŸunu der:

â€œadmin isimli kullanÄ±cÄ±ya bir token Ã¼retme kimliÄŸi verâ€
Kong sana:

key â†’ JWT'de kimin adÄ±na oluÅŸturulduÄŸunu gÃ¶steren "iss"

secret â†’ Token'Ä± imzalarken kullanÄ±lacak anahtar

ğŸ” Fark ne?
Kriter	Eski Sistem	Kong ile Sistem
Token kim Ã¼retir?	auth-service	hÃ¢lÃ¢ auth-service
Token nasÄ±l doÄŸrulanÄ±r?	SECRET_KEY ile (hardcoded)	Kong'un bildiÄŸi secret ile
Token'Ä± kim doÄŸrular?	data-service (kendi iÃ§inde)	Kong (plugin sayesinde)
KullanÄ±cÄ± yÃ¶netimi	app.py iÃ§inde sabit	Kong iÃ§inde consumer olarak kayÄ±tlÄ±

âœ… Ne yapacaÄŸÄ±z ÅŸimdi?
Kongâ€™un sana verdiÄŸi secret (ve key) deÄŸerlerini not edeceÄŸiz

auth-service/app.py iÃ§inde:

python
Kopyala
DÃ¼zenle
SECRET_KEY = "<KONG_SECRET>"
olarak deÄŸiÅŸtireceÄŸiz
3. Token oluÅŸtururken iss=key olarak JWT payload'a ekleyeceÄŸiz (Kong bunu arar)

Ä°stersen hemen bir Ã¶rnek auth-service gÃ¼ncellemesi yapayÄ±m mÄ±?
Senin Kongâ€™dan aldÄ±ÄŸÄ±n key ve secretâ€™i birlikte entegre edelim.






\usepackage[a4paper,margin=1in]{geometry}
\usepackage{lmodern}
\usepackage{setspace} % EKLENDÄ°
\usepackage{graphicx}
...
\setstretch{1.1} % satÄ±r aralÄ±ÄŸÄ± azaltÄ±ldÄ±
\setlength{\parindent}{0pt}
\setlength{\parskip}{0.5em}  % paragraf boÅŸluÄŸu azaltÄ±ldÄ±